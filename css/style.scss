$colormap: (
  color-primary: #4a8985,
  color-primary-lighter: #58a3c2,
  color-background: #efefef,
  color-text: #222222,
  color-backgroundlighter: #ccc,
  color-nav-link: #eeeeee,
  color-nav-gradientstop: #4f9199,
  color-highlight: #d74a6c
);

@mixin colormap-var($property, $varName) {
  #{$property}: map-get($colormap, $varName);
  #{$property}: var(--#{$varName}, map-get($colormap, $varName));
}

@mixin colormap-gradient($property, $stop1, $stop2) {
  #{$property}: -webkit-linear-gradient(
    map-get($colormap, $stop1),
    map-get($colormap, $stop2)
  );
  #{$property}: -webkit-linear-gradient(
    var(--#{$stop1}, map-get($colormap, $stop1)),
    var(--#{$stop2, map-get($colormap, $stop2)})
  );
  #{$property}: linear-gradient(
    map-get($colormap, $stop1),
    map-get($colormap, $stop2)
  );
  #{$property}: linear-gradient(
    var(--#{$stop1}, map-get($colormap, $stop1)),
    var(--#{$stop2, map-get($colormap, $stop2)})
  );
}

body {
  --color-primary: #{map-get($colormap, "color-primary")};
  --color-primary-lighter: #{map-get($colormap, "color-primary-lighter")};
  --color-background: #{map-get($colormap, "color-background")};
  --color-backgroundlighter: #{map-get($colormap, "color-backgroundlighter")};
  --color-nav-link: #{map-get($colormap, "color-nav-link")};
  --color-nav-gradientstop: #{map-get($colormap, "color-nav-gradientstop")};
  --color-highlight: #{map-get($colormap, "color-highlight")};
  @include colormap-var(color, color-text);
}

/* RESET */
body,
html {
  min-width: 100%;
  min-height: 100%;
  @include colormap-var(background-color, color-background);
}

body {
  font-family: minimo;
}

*,
*:after,
*:before {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

:focus {
  outline: none;
}
::-moz-focus-inner {
  border: 0;
}

/* SITE GLOBALS */

h1,
h2,
h3,
h4,
h5,
h6 {
  margin-bottom: 0.5em;
}
h1 {
  font-size: 24px;
  font-weight: 200;
}
h2 {
  font-size: 18px;
}

#about,
#projects,
#resume,
#blog {
  max-width: 640px;
  margin-left: auto;
  margin-right: auto;

  padding: 32px;
}

a {
  @include colormap-var(color, color-primary);

  -webkit-transition: color 0.2s;
  transition: color 0.2s;
}

a:hover {
  @include colormap-var(color, color-primary-lighter);
}

#firefox-svg-ref {
  display: none;
}

/******************************/
/* NON-LAYOUT SPECIFIC STYLES */
/******************************/

/* Site Nav */

#site-nav {
  position: relative;

  height: 240px;

  @include colormap-gradient(background, color-primary-lighter, color-primary);

  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;

  display: flex;
  padding: 32px;
}

#site-nav:before,
#site-nav:after {
  content: "";

  display: block;
  position: absolute;

  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
}

#site-nav:before {
  /* TODO fade in anim*/

  background-image: url(../img/bkg.jpg);
  background-attachment: fixed;
  background-position: bottom;
  background-size: cover;

  opacity: 0.4;
  filter: alpha(opacity=40);
}

#site-nav a {
  position: relative;
  width: 72px;
  height: 64px;

  line-height: 64px;
  text-align: center;

  @include colormap-var(color, color-nav-link);

  z-index: 300;
  text-decoration: none;
}

#site-nav a:before,
#site-nav a:after {
  display: inline-block;
  -webkit-transition: -webkit-transform 0.2s, opacity 0.2s;
  transition: transform 0.2s, opacity 0.2s;
}

#site-nav a:not(:hover):before,
#site-nav a:not(:hover):after {
  opacity: 0;
  filter: alpha(opacity=0);
  -webkit-transform: translate(0, 0);
  -ms-transform: translate(0, 0);
  transform: translate(0, 0);
}

#site-nav a:not(.narcissism):before {
  content: "<";
}

#site-nav a:not(.narcissism):after {
  content: ">";
}

#site-nav a:hover:before,
#site-nav a:hover:after {
  opacity: 1;
  filter: alpha(opacity=100);
}

#site-nav a:hover:before {
  -webkit-transform: translate(-5px, 0);
  -ms-transform: translate(-5px, 0);
  transform: translate(-5px, 0);
}
#site-nav a:hover:after {
  -webkit-transform: translate(5px, 0);
  -ms-transform: translate(5px, 0);
  transform: translate(5px, 0);
}

/* About Section */

#about {
  position: relative;
  padding-left: 146px;
}

#about img {
  position: absolute;
  left: 32px;
  top: 50%;
  margin-top: -41px;
  width: 82px;
  height: 82px;

  border-radius: 50%;
  border: 4px solid transparent;
  box-shadow: 0 0 3px map-get($colormap, color-backgroundlighter);
  box-shadow: 0 0 3px var(--color-backgroundlighter),
    0 0 3px map-get($colormap, color-backgroundlighter);
}

.link-list {
  padding-top: 32px;
}

.link-list a {
  text-decoration: none;
  display: inline-block;
  margin-bottom: 0.3em;
}
.link-list a:not(:last-child) {
  padding-right: 16px;
}

/* PROJECT SECTION */
.project-list {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
}

$proj-margin: 0.5em;

.proj {
  list-style: none;
  padding: 0.5em;
  margin: 0.5em;
  display: flex;
  flex-direction: column;

  .description {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;

    *:last-child {
      a:before {
        content: "\f0c1";
      }
    }

    a {
      text-decoration: none;
    }
    a:before {
      font: normal normal normal 14px/1 FontAwesome;
      margin-right: 0.25em;
    }

    a[href*="github.com"]:before {
      content: "\f09b";
    }

    p {
      margin-top: 0.25em;
      margin-bottom: 0.25em;
    }
  }
}

.proj .project-details {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
}

.proj .project-details .links {
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  margin-top: 0.5em;
}

.proj .project-details .link {
  text-align: left;
  text-decoration: none;

  .fa {
    position: relative;
    top: 2px;
  }
}

.proj.default-scale {
  width: calc(33% - 1em);
}

.proj.medium-scale {
  width: calc(50% - 1em);

  .proj-icon-svg {
    height: 3em;
  }
}

.proj.large-scale {
  width: calc(60% - 1em);
  margin-left: calc(20% + 0.5em);
  margin-right: calc(20% + 0.5em);
  padding: 1em;

  .proj-header {
    justify-content: center;
  }

  .proj-icon-svg {
    height: 4em;
  }
}

@media (max-width: 740px) {
  .proj.default-scale {
    width: calc(50% - 1em);
  }

  .proj.medium-scale {
    width: calc(100% - 1em);
  }
}

.proj-header {
  display: flex;
  align-items: center;
  margin-bottom: 0.25em;

  .proj-icon,
  .proj-fa-icon {
    margin-right: 0.33em;
    height: 1.5em;
    width: 1.5em;
  }

  h2 {
    margin: 0;
  }
}

.proj-icon-svg {
  // flex-shrink: 0;
  height: 2em;
  margin-right: 0.5em;
}

/***************************/
/*  MASSIVE SCREEN LAYOUT  */
/***************************/

@media (min-width: 1620px) {
  body {
    font-size: 24px;
  }

  h1 {
    font-size: 42px;
  }
  h2 {
    font-size: 24px;
  }

  #about,
  #projects,
  #resume,
  #blog {
    max-width: 1024px;
    margin-left: auto;
    margin-right: auto;

    padding: 32px;
  }

  #site-nav {
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -ms-flex-pack: center;
    justify-content: center;
    -webkit-box-align: end;
    -webkit-align-items: flex-end;
    -ms-flex-align: end;
    align-items: flex-end;
  }

  #site-nav a {
    font-size: 32px;
    height: 60px;
    width: 140px;
    margin-left: 64px;
    margin-right: 64px;
  }

  #site-nav a.narcissism {
    position: absolute;
    top: 50%;
    margin-top: -32px;
  }

  #site-nav a.narcissism p {
    width: 500px;
    text-align: left;
    padding-left: 32px;
  }

  #site-nav a.narcissism .tiny {
    display: none;
  }

  #about {
    padding-left: 192px;
  }

  #about img {
    width: 128px;
    height: 128px;
  }
}

/******************************/
/*  DESKTOP LAYOUT SPECIFICS  */
/******************************/

@media (min-width: 1025px) and (max-width: 1619px) {
  #site-nav {
    width: 100%;
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -ms-flex-pack: center;
    justify-content: center;
    -webkit-box-align: end;
    -webkit-align-items: flex-end;
    -ms-flex-align: end;
    align-items: flex-end;
  }

  #site-nav a {
    margin-left: 24px;
    margin-right: 24px;
  }

  #site-nav a.narcissism {
    position: absolute;
    top: 50%;
    margin-top: -32px;
  }

  #site-nav a.narcissism p {
    width: 500px;
    text-align: left;
    padding-left: 32px;
  }

  #site-nav a.narcissism .tiny {
    display: none;
  }
}

/*TABLET LAYOUT*/
@media (max-width: 1024px) and (min-width: 591px) {
  body {
    padding-left: 128px;
  }

  #site-nav {
    position: fixed;
    left: 0px;

    min-height: 320px;
    width: 128px;

    -webkit-box-orient: vertical;

    -webkit-box-direction: normal;

    -webkit-flex-direction: column;

    -ms-flex-direction: column;

    flex-direction: column;
    -webkit-box-pack: end;
    -webkit-justify-content: flex-end;
    -ms-flex-pack: end;
    justify-content: flex-end;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;

    height: 100%;
  }

  #site-nav a.narcissism {
    position: absolute;
    top: 32px;
    left: 50%;
    width: 64px;
    margin-left: -32px;
  }

  #site-nav a.narcissism .big {
    display: none;
  }
}

/* PHONE LAYOUT */
@media (max-width: 590px) {
  body > div:first-of-type {
    margin-top: 128px;
  }

  body {
    min-width: 360px;
  }

  #site-nav {
    z-index: 9000;
    position: fixed;
    top: 0;
    left: 0;
    height: 64px;
    min-height: 64px;
    width: 100%;

    padding-top: 0;
    padding-bottom: 0;

    -webkit-box-pack: justify;

    -webkit-justify-content: space-between;

    -ms-flex-pack: justify;

    justify-content: space-between;

    @include colormap-gradient(
      background,
      color-primary-lighter,
      color-nav-gradientstop
    );
  }

  #site-nav a {
    height: 64px;
  }

  #site-nav a.narcissism .big {
    display: none;
  }
}

/* Webkit fix */
@media screen and (-webkit-min-device-pixel-ratio: 0) {
  #site-nav:before {
    background-attachment: scroll;
  }
}

///////////////////
// Color palette //
///////////////////
.palette {
  text-align: center;
}

.palette-color {
  appearance: none;
  background: none;
  border: none;
  width: 2em;
  height: 2em;
}
